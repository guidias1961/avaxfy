<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Avaxfy – Stream Your Music on Avalanche</title>

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- CSS inline (você pode mover para styles.css se preferir) -->
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{display:flex;height:100vh;font-family:'Segoe UI',sans-serif;background:#0d0d0d;color:#e0e0e0;overflow:hidden}
    #sidebar{width:240px;padding:20px;background:rgba(20,20,20,.9);backdrop-filter:blur(8px);display:flex;flex-direction:column;gap:20px;border-right:1px solid #222}
    #sidebar h1{font-size:1.8rem;color:#e84142}
    #sidebar nav button, #sidebar nav a{display:block;padding:10px 0;color:#bbb;background:none;border:none;text-align:left;cursor:pointer;transition:color .2s;font:inherit}
    #sidebar nav button:hover, #sidebar nav a:hover, #sidebar nav a.active{color:#e84142}
    #connectWallet{margin-top:auto;padding:10px;background:#e84142;border:none;color:#fff;font-weight:bold;border-radius:4px;cursor:pointer;transition:background .2s;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    #connectWallet.connected{background:#4CAF50}
    #walletAddress{font-size:.8rem;margin-top:5px;word-break:break-all}

    #main{flex:1;display:flex;flex-direction:column}
    header{padding:20px;background:rgba(20,20,20,.9);border-bottom:1px solid #222}
    #searchBar{width:100%;padding:10px 15px;background:#111;border:none;color:#eee;font-size:1rem;border-radius:4px}
    #contentArea{flex:1;overflow-y:auto;padding:20px;background:#121212;padding-bottom:100px}
    #contentArea.empty{display:flex;align-items:center;justify-content:center;color:#666}

    .track{display:flex;align-items:center;gap:15px;padding:10px;border-radius:6px;margin-bottom:15px;cursor:pointer;transition:background .2s}
    .track:hover{background:rgba(232,65,66,.1)}
    .track img{width:50px;height:50px;object-fit:cover;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,.5)}
    .track-info{flex:1}
    .track-info span{display:block;line-height:1.2}
    .track-info span:first-child{font-weight:bold}
    .track-info .total-supported{font-size:.85rem;color:#aaa;margin-top:4px}
    .twitter-handle{color:#1DA1F2;font-size:.8em;display:flex;align-items:center;margin-top:2px}
    .twitter-handle .material-icons{font-size:1em;margin-right:4px}
    .rank{font-size:.9rem;width:24px;text-align:center;color:#e84142;font-weight:bold}
    .favorite-icon{font-size:24px;color:#e84142;cursor:pointer;user-select:none}
    .support-btn,.view-supporters-btn{background:#e84142;border:none;color:#fff;padding:6px 10px;border-radius:4px;cursor:pointer;font-size:.8rem;margin-left:5px;transition:background .2s}
    .support-btn:hover,.view-supporters-btn:hover{background:#b81b23}

    /* modais */
    .modal-backdrop{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center}
    .modal-backdrop.active{display:flex}
    .modal{background:#171717;padding:30px;border-radius:8px;width:320px;display:flex;flex-direction:column;gap:15px}
    .modal h2{color:#e84142;margin-bottom:10px}
    .modal input[type=text],.modal input[type=file],.modal input[type=number]{padding:8px;background:#121212;border:none;border-radius:4px;color:#eee}
    .modal button{padding:10px;border:none;border-radius:4px;cursor:pointer;transition:background .2s}
    .modal button.confirm{background:#e84142;color:#fff}
    .modal button.confirm:hover{background:#b81b23}
    .modal button.cancel{background:#333;color:#eee}

    #paymentStatus{margin-top:10px;font-size:.9em}
    .payment-success{color:#4CAF50}
    .payment-error{color:#f44336}

    #supportersTable{width:100%;border-collapse:collapse;margin-top:10px}
    #supportersTable th,#supportersTable td{border:1px solid #333;padding:6px;font-size:.85rem;text-align:left}
    #supportersTable th{background:#222}
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <div id="sidebar">
    <h1>Avaxfy</h1>
    <nav>
      <a id="nav-home" class="active" onclick="showSection('home')">Home</a>
      <a id="nav-fav" onclick="showSection('favorites')">Favorites</a>
      <button onclick="toggleUpload()">Upload</button>
    </nav>
    <button id="connectWallet" onclick="connectWallet()">Connect Wallet</button>
    <span id="walletAddress"></span>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main">
    <header>
      <input id="searchBar" placeholder="Search…" oninput="filterTracks()">
    </header>
    <div id="contentArea" class="empty">Nenhuma faixa disponível.</div>
  </div>

  <!-- UPLOAD MODAL -->
  <div id="uploadModal" class="modal-backdrop">
    <div class="modal">
      <h2>Upload Your Track</h2>
      <input id="trackTitle" type="text" placeholder="Track Title" required>
      <input id="trackArtist"type="text" placeholder="Artist Name" required>
      <input id="twitterHandle"type="text" placeholder="Your X/Twitter @ (optional)">
      <input id="trackFile"type="file" accept="audio/*" required>
      <input id="coverFile"type="file" accept="image/*">
      <div id="paymentStatus"></div>
      <button class="confirm" onclick="processUpload()">Pay & Upload (0.1 AVAX)</button>
      <button class="cancel" onclick="toggleModal('uploadModal', false)">Cancel</button>
    </div>
  </div>

  <!-- SUPPORT MODAL -->
  <div id="supportModal" class="modal-backdrop">
    <div class="modal">
      <h2>Support</h2>
      <label><input type="radio" name="supportAmt" value="0.1" checked>0.1 AVAX</label>
      <label><input type="radio" name="supportAmt" value="0.5">0.5 AVAX</label>
      <label><input type="radio" name="supportAmt" value="custom">Custom</label>
      <input id="customSupportAmt" type="number" placeholder="Enter amount" step="0.0001" min="0">
      <button class="confirm" onclick="confirmSupport()">Send</button>
      <button class="cancel" onclick="toggleModal('supportModal', false)">Cancel</button>
    </div>
  </div>

  <!-- SUPPORTERS MODAL -->
  <div id="supportersModal" class="modal-backdrop">
    <div class="modal">
      <h2>Supporters</h2>
      <table id="supportersTable"><thead><tr><th>Wallet</th><th>Amount (AVAX)</th></tr></thead><tbody></tbody></table>
      <button class="cancel" onclick="toggleModal('supportersModal', false)">Close</button>
    </div>
  </div>

  <!-- PLAYER BAR -->
  <div id="playerBar" class="modal-backdrop">… seu player aqui …</div>

  <!-- scripts -->
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
